<!DOCTYPE html>
<html lang="en">
  <head>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <title>SpotFinder</title>

  </head>
  <body>
    <h1 class="text-center">SpotFinder</h1>
    <br/>

    <h2>Property Owner Landing Page</h2>

    <form>
      <label for="name">Spot Name:</label>
      <input type="name" name="name" id ="name" placeholder="Spot Name" />

      </br>

      <label for="picture">Spot Photo:</label>
      <input type="picture" name="picture" id ="picture" placeholder="Spot Photo" />

      </br>

      <label for="price">Spot Price:</label>
      <input type="price" name="price" id ="price" placeholder="Spot Price" />

      </br>

      <label for="availability">Spot Availability:</label>
      <input type="availability" name="availability" id ="availability" placeholder="Spot Availability" />

      </br>

      <label for="location">Spot Location:</label>
      <input type="location" name="location" id ="location" placeholder="Spot Location" />



      <button type="submit">Submit</button>
    </form>


    <script src="js/truffle-contract.js"></script>
    <script src="js/app.js"></script>
    <script>
      function handleSubmit(event) {
        //Opening spots.json
        const fs = require("fs");
        let spotsjson = fs.readFileSync("spots.json","utf-8");

        /*Saving spots.json as js array*/
        let spots = JSON.parse(spotsjson);

        //Converting form data into JSON entry
        event.preventDefault();

        const data = new FormData(event.target);

        var newSpot = {
          id: spots.length(),
          name: data.get(name),
          picture: data.get(picture),
          price: data.get(price),
          availability: data.get(availability),
          location: data.get(location)
        }

        console.log({ newSpot });

        var spotAsJson = JSON.stringify(newSpot);

        console.log(spotAsJson);






        //Add new spot to the array of
      }

      const form = document.querySelector('form');
      form.addEventListener('submit', handleSubmit);
    </script>
  </body>
</html>

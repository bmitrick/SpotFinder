<!DOCTYPE html>
<html lang="en">
  <head>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <title>SpotFinder</title>

  </head>
  <body>
    <h1 class="text-center">SpotFinder</h1>
    <br/>

    <h2>Property Owner Landing Page</h2>

    <form>
      <label for="name">Spot Name:</label>
      <input type="name" name="name" id ="name" placeholder="Spot Name" />

      </br>

      <label for="picture">Spot Photo:</label>
      <input type="picture" name="picture" id ="picture" placeholder="Spot Photo" />

      </br>

      <label for="price">Spot Price:</label>
      <input type="price" name="price" id ="price" placeholder="Spot Price" />

      </br>

      <label for="availability">Spot Availability:</label>
      <input type="availability" name="availability" id ="availability" placeholder="Spot Availability" />

      </br>

      <label for="location">Spot Location:</label>
      <input type="location" name="location" id ="location" placeholder="Spot Location" />



      <button type="submit">Submit</button>
    </form>


    <script src="js/truffle-contract.js"></script>
    <script src="js/app.js"></script>
    <script>

      function handleSubmit(event) {
        //Opening spots.json
        const fs = require("fs");
          $.getJSON('../spots.json', function(data){
            /*Saving spots.json as js array*/
            let spots = JSON.parse(spotsjson);

            //Converting form data into JSON entry
            event.preventDefault();

            const data = new FormData(event.target);

            var  id = spots.length();
            var  name = data.get(name);
            var  picture = data.get(picture);
            var  price= data.get(price);
            var  availability= data.get(availability);
            var  location= data.get(location);
    
            var newSpot= "{id: " + id + ", name: " + name + ", picture: " + picture + ", price: " + price + ", availability: " + availability +", location: " + location + " }";

            var spotAsJson = JSON.stringify(newSpot);

            console.log(spotAsJson);
            //Add new spot to the array of
          }
        }
      const form = document.querySelector('form');
      form.addEventListener('submit', handleSubmit);
    </script>
  </body>
</html>
